<div class="flex h-screen bg-grayLight">
    <!-- Sidebar com cor secundária -->
    <app-sidebar [isSecondaryColor]="true" />

    <!-- Conteúdo Principal -->
    <main class="flex-1 overflow-y-auto p-8">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <header class="mb-8">
                <h1 class="text-4xl font-bold text-secondary mb-2">Bem-vindo, {{ userName }}!</h1>
                <p class="text-gray-600">Explore e participe de eventos incríveis</p>
            </header>

            <!-- Meus Eventos -->
            <section class="mb-12">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-secondary flex items-center gap-2">
                        <i class="ph-bold ph-calendar-check text-3xl"></i>
                        Meus Eventos
                    </h2>
                    <span class="text-sm text-gray-500">{{ myEvents.length }} evento(s)</span>
                </div>

                <div *ngIf="myEvents.length === 0" class="bg-white rounded-2xl p-8 text-center shadow-sm">
                    <i class="ph-bold ph-calendar-x text-6xl text-gray-300 mb-4"></i>
                    <p class="text-gray-500">Você ainda não está participando de nenhum evento.</p>
                    <p class="text-gray-400 text-sm mt-2">Explore os eventos disponíveis abaixo!</p>
                </div>

                <div *ngIf="myEvents.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <article *ngFor="let event of myEvents"
                        class="bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow border-l-4 border-secondary">
                        <div class="flex justify-between items-start mb-3">
                            <span class="text-xs font-semibold text-secondary bg-secondary/10 px-3 py-1 rounded-full">
                                {{ event.category }}
                            </span>
                            <button (click)="leaveEvent(event)"
                                class="text-red-500 hover:text-red-700 transition-colors" title="Cancelar inscrição">
                                <i class="ph-bold ph-sign-out text-xl"></i>
                            </button>
                        </div>

                        <h3 class="text-xl font-bold text-secondary mb-2">{{ event.title }}</h3>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-2">{{ event.description }}</p>

                        <div class="space-y-2 text-sm text-gray-500">
                            <div class="flex items-center gap-2">
                                <i class="ph-bold ph-calendar"></i>
                                <span>{{ event.date | date:'dd/MM/yyyy' }}</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="ph-bold ph-map-pin"></i>
                                <span>{{ event.location }}</span>
                            </div>
                        </div>

                        <button (click)="viewEventDetails(event)"
                            class="mt-4 w-full bg-secondary text-white py-2 rounded-lg hover:bg-secondary/90 transition-colors font-semibold">
                            Ver Detalhes
                        </button>
                    </article>
                </div>
            </section>

            <!-- Eventos Disponíveis -->
            <section>
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-secondary flex items-center gap-2">
                        <i class="ph-bold ph-calendar-plus text-3xl"></i>
                        Eventos Disponíveis
                    </h2>
                    <span class="text-sm text-gray-500">{{ availableEvents.length }} evento(s)</span>
                </div>

                <div *ngIf="availableEvents.length === 0" class="bg-white rounded-2xl p-8 text-center shadow-sm">
                    <i class="ph-bold ph-calendar text-6xl text-gray-300 mb-4"></i>
                    <p class="text-gray-500">Não há eventos disponíveis no momento.</p>
                </div>

                <div *ngIf="availableEvents.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <article *ngFor="let event of availableEvents"
                        class="bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start mb-3">
                            <span class="text-xs font-semibold text-primary bg-primary/10 px-3 py-1 rounded-full">
                                {{ event.category }}
                            </span>
                            <div class="text-xs text-gray-500">
                                <i class="ph-bold ph-users"></i>
                                {{ event.participants }}/{{ event.maxParticipants }}
                            </div>
                        </div>

                        <h3 class="text-xl font-bold text-secondary mb-2">{{ event.title }}</h3>
                        <p class="text-gray-600 text-sm mb-4 line-clamp-2">{{ event.description }}</p>

                        <div class="space-y-2 text-sm text-gray-500 mb-4">
                            <div class="flex items-center gap-2">
                                <i class="ph-bold ph-calendar"></i>
                                <span>{{ event.date | date:'dd/MM/yyyy' }}</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="ph-bold ph-map-pin"></i>
                                <span>{{ event.location }}</span>
                            </div>
                        </div>

                        <!-- Barra de progresso de vagas -->
                        <div class="mb-4">
                            <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                                <div class="h-full bg-secondary transition-all"
                                    [style.width.%]="(event.participants / event.maxParticipants) * 100">
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">
                                {{ event.maxParticipants - event.participants }} vagas disponíveis
                            </p>
                        </div>

                        <button (click)="joinEvent(event)" [disabled]="event.participants >= event.maxParticipants"
                            class="w-full bg-primary text-white py-2 rounded-lg hover:bg-primary/90 transition-colors font-semibold disabled:bg-gray-300 disabled:cursor-not-allowed">
                            <span *ngIf="event.participants < event.maxParticipants">Participar</span>
                            <span *ngIf="event.participants >= event.maxParticipants">Esgotado</span>
                        </button>
                    </article>
                </div>
            </section>
        </div>
    </main>
</div>